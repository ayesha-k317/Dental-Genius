<!DOCTYPE HTML>
<HTML lang="en">
<HEAD>
    <!-- Character encoding for the document -->
    <meta charset="UTF-8">
    
    <!-- Ensures the page is responsive on all devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Link to the external CSS file for styling the page -->
    <link rel="stylesheet" href="Login.css">
    
    <!-- Title of the page that appears in the browser tab -->
    <title>Sign In</title>
</HEAD>

<BODY>
    <!-- Section for the login image -->
    <div class="Image">
        <img src="bg-login.png" alt="Login Image">
    </div>

    <!-- Container for the login form -->
    <div class="sq-box">
        
        <div class="slide">
            <!-- Form for user login -->
            <form class="form" id="loginForm">
                
                <!-- Title of the form, welcoming the user -->
                <span class="title">WELCOME BACK</span>
                
                <!-- Input box for the email address -->
                <div class="input-box">
                    <input type="email" class="input" name="email" required>
                    <label class="label">Email Address</label>
                </div>
                
                <!-- Input box for the password -->
                <div class="input-box">
                    <input type="password" class="input" name="password" required>
                    <label class="label">Password</label>
                </div>
                
                <!-- Submit button for logging in -->
                <button type="submit">LOG IN</button>
                <p id="lblMessage" style="color: red;"></p>
            </form>
        </div>
    </div>

    <script>
        document.getElementById('loginForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            const formData = new FormData(this);
            const data = Object.fromEntries(formData.entries());

            const response = await fetch('/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });

            const result = await response.json();
            if (result.success) {
                window.location.href = '/Staff-Dashboard.html';
            } else {
                document.getElementById('lblMessage').textContent = 'Login failed: ' + result.message;
            }
        });
    </script>
</BODY>
</HTML>
