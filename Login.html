<!DOCTYPE HTML>
<HTML Lang="en">
<HEAD>
    <!-- Character encoding for the document -->
    <meta charset="UTF-8">
    
    <!-- Ensures the page is responsive on all devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Link to the external CSS file for styling the page -->
    <link rel="stylesheet" href="Login.css">
    
    <!-- Title of the page that appears in the browser tab -->
    <title>Sign In</title>
</HEAD>

<BODY>
    <!-- Section for the login image -->
    <div class="Image">
        <!-- Image representing the login page, stored in assets/images -->
        <img src="bg-login.png">
    </div>

    <!-- Container for the login form -->
    <div class="sq-box">
        
        <!-- Checkbox for toggling between forms -->
        <input type="checkbox" id="toggle">
        
        <!-- Sliding panel for form display -->
        <div class="slide">
            <!-- Form for user login -->
            <form class="form" id="login-form" action="/login" method="POST">
                
                <!-- Title of the form, welcoming the user -->
                <span class="title">WELCOME BACK</span>
                
                <!-- Input box for the email address -->
                <div class="input-box">
                    <!-- Input field for email with validation to ensure it's filled -->
                    <input type="email" class="input" name="email" required>
                    <!-- Label for the email input -->
                    <label class="label">Email Address</label>
                </div>
                
                <!-- Input box for the password -->
                <div class="input-box">
                    <!-- Input field for password with validation to ensure it's filled -->
                    <input type="password" class="input" name="password" required>
                    <!-- Label for the password input -->
                    <label class="label">Password</label>
                </div>
                
                <!-- Submit button for logging in -->
                <button type="submit">LOG IN</button>
            </form>
        </div>
    </div>

    <script>
        document.getElementById('login-form').addEventListener('submit', async (e) => {
            e.preventDefault();

            const form = e.target;
            const username = form.username.value;
            const password = form.password.value;

            const res = await fetch('/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username, password })
            });

            const data = await res.json();

            if (data.success) {
                alert("Login successful!");
                window.location.href = '/Staff-Dashboard.html'; 
            } else {
                alert("Invalid username or password.");
            }
        });
        (function(){
            const form = document.getElementById('login-form');
            if (form) {
              form.addEventListener('submit', function(e){
                e.preventDefault();
                window.location.href = 'Staff-Dashboard.html';
              });
            }
        })();
    </script>
</BODY>
</HTML>
